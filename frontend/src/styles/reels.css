@import './theme.css';

/* Modern vertical reels styling (Instagram-like) */
:root{
  --reel-bg: rgba(3,7,18,0.45);
  --glass: rgba(255,255,255,0.04);
  --muted: rgba(255,255,255,0.82);
  --accent: #ff5a5f;
  --accent-2: #ff8a65;
  --action-size: 56px;
  --action-gap: 12px;
  --reel-radius: 14px;
}

/* Page / feed layout */
.reels-page{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background: transparent;
  padding: 0;
}

.reels-feed{
  width:100%;
  max-width:720px;
  height:100vh;
  margin:0 auto;
  overflow:auto;
  scroll-snap-type: y mandatory;
  -webkit-overflow-scrolling: touch;
  -webkit-tap-highlight-color: transparent;
}

/* Each reel takes a viewport height (snap to it) */
.reel{
  position:relative;
  width:100%;
  height:100vh;
  scroll-snap-align: start;
  display:flex;
  align-items:flex-end;
  justify-content:center;
  background: #000;
  overflow:hidden;
}

/* video fills the reel */
.reel-video{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  transform-origin:center;
  transition:transform .6s ease, filter .36s ease;
  will-change: transform;
  filter: contrast(1.02) saturate(1.02);
}

/* subtle scale on hover for pointer devices */
@media (hover: hover) {
  .reel:hover .reel-video{
    transform: scale(1.02);
  }
}

/* Overlay layers */
.reel-overlay{
  position:relative;
  z-index:20;
  width:100%;
  height:100%;
  pointer-events:none;
  display:flex;
  flex-direction:column;
  justify-content:flex-end;
}

/* top gradient - lighter so video stays visible */
.reel-overlay::before{
  content:'';
  position:absolute;
  inset:0;
  background: linear-gradient(180deg, rgba(0,0,0,0.22) 0%, rgba(0,0,0,0.0) 40%);
  z-index:8;
  pointer-events:none;
}

/* bottom gradient for text readability (lighter) */
.reel-overlay-gradient{
  position:absolute;
  left:0;right:0;bottom:0;
  height:46%;
  background: linear-gradient(0deg, rgba(0,0,0,0.5), rgba(0,0,0,0.14) 30%, rgba(0,0,0,0.0) 70%);
  z-index:9;
  pointer-events:none;
}

/* Right-side action bar (like/comment/save) */
.reel-actions{
  position:absolute;
  right:12px;
  bottom:150px; /* push actions slightly upward for better clarity */
  z-index:22;
  display:flex;
  flex-direction:column;
  gap:var(--action-gap);
  pointer-events:auto;
  align-items:center;
  transform: translateZ(0);
}

/* action group (icon + count) */
.reel-action-group{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:8px;
  color:var(--muted);
  font-size:12px;
  text-align:center;
}

/* circular action button */
.reel-action{
  width:var(--action-size);
  height:var(--action-size);
  min-width:var(--action-size);
  min-height:var(--action-size);
  border-radius:14px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
  border: 1px solid rgba(255,255,255,0.06);
  color: white;
  cursor:pointer;
  transition: transform .12s ease, box-shadow .12s ease, background .12s, color .12s;
  box-shadow: 0 6px 18px rgba(2,6,23,0.5);
  backdrop-filter: blur(6px) saturate(120%);
}

/* SVG icon sizing inside action */
.reel-action svg { width:22px; height:22px; display:block; }

/* hover / active */
@media (hover: hover){
  .reel-action:hover{ transform: translateY(-6px) scale(1.03); box-shadow: 0 12px 30px rgba(2,6,23,0.6) }
}
.reel-action:active{ transform: scale(.98) }

/* count next to actions */
.reel-action__count{
  color:var(--muted);
  font-size:13px;
  margin-top:6px;
}

/* liked / saved states - visual emphasis */
.reel-action.liked,
.reel-action.saved{
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
  color: #fff;
  border-color: rgba(255,90,95,0.15);
  box-shadow: 0 14px 36px rgba(255,90,95,0.14);
}
.reel-action.liked svg,
.reel-action.saved svg{ filter: drop-shadow(0 6px 18px rgba(255,90,95,0.12)); }
.reel-action.liked + .reel-action__count,
.reel-action.saved + .reel-action__count{
  color: var(--accent);
  font-weight:700;
}

/* subtle icon pulse when toggled */
.reel-action.toggle-anim{
  animation: heart-pop .34s cubic-bezier(.2,.9,.35,1);
}

/* description + CTA area bottom-left */
.reel-content{
  position:absolute;
  left:16px;
  bottom:92px; /* raised so CTA sits above bottom-nav */
  z-index:25;   /* higher so CTA is clickable above bottom nav */
  pointer-events:auto;
  max-width:70%;
  display:flex;
  flex-direction:column;
  gap:12px;
}

/* description text with subtle fade & ellipsis */
.reel-description{
  margin:0;
  color: #fff;
  font-size:14px;
  line-height:1.3;
  max-height:4.2em;
  overflow:hidden;
  text-overflow:ellipsis;
  display:-webkit-box;
  -webkit-line-clamp:3;
  -webkit-box-orient:vertical;
  filter: drop-shadow(0 6px 18px rgba(0,0,0,0.7));
}

/* Visit store CTA styled like a pill - raised and clickable */
.reel-btn{
  display:inline-block;
  padding:10px 14px;
  background: linear-gradient(90deg,var(--accent),var(--accent-2));
  color:white;
  border-radius:999px;
  font-weight:700;
  font-size:14px;
  text-decoration:none;
  border: none;
  box-shadow: 0 12px 34px rgba(255,90,95,0.16);
  transition: transform .12s ease, box-shadow .12s ease, opacity .12s;
  pointer-events:auto;
  z-index:26;
}
.reel-btn:hover{ transform: translateY(-4px) }
.reel-btn:active{ transform: translateY(-1px) }

/* bottom nav overlay (glass) to show home/saved */
.reel-bottom-nav{
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  bottom:10px;
  z-index:22;
  display:flex;
  gap:18px;
  align-items:center;
  justify-content:center;
  padding:8px 16px;
  background: linear-gradient(180deg, rgba(0,0,0,0.36), rgba(0,0,0,0.22));
  border-radius:999px;
  color: #fff;
  backdrop-filter: blur(6px);
  border: 1px solid rgba(255,255,255,0.04);
  pointer-events:auto;
}

/* align icon + label horizontally inside bottom nav items */
.reel-bottom-nav a,
.reel-bottom-nav button{
  display:inline-flex;
  flex-direction:row;
  gap:8px;
  align-items:center;
  padding:8px 10px;
  background: transparent;
  border: none;
  color: inherit;
  cursor: pointer;
  font-size:13px;
  text-decoration:none;
}
.reel-bottom-nav a .icon,
.reel-bottom-nav button .icon{ width:18px; height:18px; display:inline-block }

/* emphasize active bottom nav item */
.reel-bottom-nav a.active{
  color:var(--accent);
  font-weight:700;
}

/* empty state centered */
.empty-state{
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--muted);
  font-size:16px;
}

/* subtle decorative heart pulse animation on like (when :active) */
@keyframes heart-pop {
  0%{ transform: scale(.9); opacity:.8 }
  50%{ transform: scale(1.35); opacity:1 }
  100%{ transform: scale(1); opacity:1 }
}

/* mobile tweaks */
@media (max-width:520px){
  .reels-feed{ max-width:100%; }
  .reel-actions{ right:8px; bottom:140px; gap:10px }
  .reel-content{ left:12px; bottom:110px; max-width:72% } /* maintain space for CTA above bottom-nav */
  .reel-btn{ padding:8px 10px; font-size:13px }
  .reel-action{ width:48px; height:48px; border-radius:12px; }
  .reel-action__count{ font-size:12px }
  .reel-bottom-nav{ padding:6px 12px; gap:12px }
  .reel-bottom-nav a{ font-size:12px }
}

/* support for light theme variables (if theme.css switches variables) */
@media (prefers-color-scheme: light){
  .reel-action{
    background: linear-gradient(180deg, rgba(255,255,255,0.92), rgba(255,255,255,0.88));
    color: #111;
    border:1px solid rgba(15,23,36,0.04);
    box-shadow: 0 6px 18px rgba(2,6,23,0.06);
  }
  .reel-description{ color: rgba(15,23,36,0.92) }
  .reel-bottom-nav{ color: rgba(15,23,36,0.9); background: rgba(255,255,255,0.94); border:1px solid rgba(15,23,36,0.04) }
}
